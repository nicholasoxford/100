(()=>{"use strict";({777:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(a,i){function r(e){try{d(o.next(e))}catch(e){i(e)}}function s(e){try{d(o.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}d((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),chrome.runtime.onMessage.addListener((function(e,t,o){var a;return n(this,void 0,void 0,(function*(){if("update"===e.message){var t=[],n={},o={};if(e.url.includes("zillow.com"))var i=function(e){for(var t=document.querySelectorAll('script[type="application/ld+json"]'),n={},o=0;o<t.length;o++){const a=JSON.parse(t[o].innerHTML);a.url===e&&(a.geo&&(n.longitude=a.geo.longitude,n.latitude=a.geo.latitude),a.address&&(n.address=a.address))}return n}(e.url);else i=function(){for(var e=document.querySelectorAll('script[type="application/ld+json"]'),t={},n=0;n<e.length;n++){const o=JSON.parse(e[n].innerHTML);o.geo&&(t.longitude=o.geo.longitude,t.latitude=o.geo.latitude),o.address&&(t.address=o.address)}return t}();if(console.log("geoInfo",i),i.longitude&&i.latitude){var r=yield fetch("https://us-east-1.aws.data.mongodb-api.com/app/landinfo-jpfgc/endpoint/landinfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:i.latitude,longitude:i.longitude,address:i.address})});let e=yield r.json();const a=JSON.parse(e);for(const e of a.traderJoes)t.push(JSON.parse(e));n=a.plant,o=a.airQuality.data}chrome.storage.local.set({traderJoes:t},(function(){})),chrome.storage.local.set({plantHardiness:n},(function(){})),chrome.storage.local.set({airQuality:o},(function(){})),yield chrome.runtime.sendMessage({message:"airQualityUpdate",airQuality:null!==(a=o.aqi)&&void 0!==a?a:""})}}))}))}})[777](0,{})})();